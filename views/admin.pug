extends layout

include mixins/_adminEventCard
include mixins/_pagination

block content
	.inner
		h1.offscreen #{title}

		if expiredCount
			form(class="form" action="/admin/expired-events" method="POST")
				h2 Expired events #{expiredCount} 
				input(class="input button" type="submit" value="Delete all expired events" disabled=(expiredCount ===  0 ? true : false))

		form(class="form-card eb__form" method="POST")
			h2 Eventbrite events
			p Events are pulled in starting from tomorrows date, please supply an end date.
			label(class="label" for="endDate") End date:
			input(class="input" type="date" id="endDate" name="end_date")
			input(class="input button" type="submit" class="button" formaction="/admin/get-eventbrite-events" value="Get EventBrite Events")

	h2 Pending events #{pendingCount} 
	if pendingCount
		form(method="POST")
			.events
				each event in events
					+adminEventCard(event)
			.inner.flexbox
				input(class="input button eb__update" type="submit", formaction=`/admin` value="Update")
				input(class="input button button--danger eb__delete" type="submit", formaction="/admin/delete-all-pending" value="Delete all pending events")
			+pagination(page, pages, count, parentSlug)
